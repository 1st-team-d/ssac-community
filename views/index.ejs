<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>새싹커뮤니티</title>

    <!-- CDN -->
    <%- include('./includes/cdn.ejs') %>

    <!-- login.js -->
    <script defer src="/static/js/loginRegister.js"></script>

    <!-- main -->
    <link rel="stylesheet" href="/static/css/index.css" />
  </head>
  <body>
    <!-- header -->
    <%- include('./includes/header.ejs') %>

    <main class="heroBg">
      <!-- 메인 소개 글 -->
      <div
        class="indexContainer container d-flex flex-column justify-content-center"
      >
        <div class="row">
          <!-- 왼쪽 열: 메인 소개 글 -->
          <div class="col-md-6">
            <div class="textWrap">
              <h2><strong>새싹 커뮤니티</strong></h2>
              <h3>프론트엔드 + 백엔드 + 가나다라</h3>
              <p>
                새싹 커뮤니티 전용 어쩌고<br />
                저쩌고 가다나라마바사 커뮤니티입니다.
              </p>
              <div class="btnWrap">
                <% if (typeof session === 'undefined') { %>
                <a
                  href=""
                  class="text-decoration-none"
                  data-bs-toggle="modal"
                  data-bs-target="#loginModal"
                >
                  <span class="btn">글 작성하기</span>
                </a>
                <a
                  href=""
                  class="text-decoration-none"
                  data-bs-toggle="modal"
                  data-bs-target="#registerModal"
                >
                  <span class="btn ghostBtn">가입하기</span>
                </a>
                <% } else { %>
                <a href="/board/register" class="btn">글쓰기</a>
                <% } %>
              </div>
            </div>
          </div>

          <!-- 게시판 소개 카드 추가 -->
          <section
            id="boardCarousel"
            class="carousel slide trending-podcast-section section-padding"
            data-bs-ride="carousel"
          >
            <div class="boardCarouselContainer">
              <!-- 모바일 화면에서는 슬라이드 기능 활성화 -->
              <div class="carousel-inner d-md-none">
                <% for (let i = 0; i < boards.length; i++) { %>
                <div class="carousel-item<%= i === 0 ? ' active' : '' %>">
                  <div class="row">
                    <div class="col-12 mb-4">
                      <div class="custom-block custom-block-full">
                        <div class="custom-block-image-wrap">
                          <a href=""> </a>
                        </div>
                        <div class="custom-block-info">
                          <h4 class="mb-2">
                            <a href=""> # 카테고리 </a>
                          </h4>
                          <br /><br />
                          <div class="profile-block d-flex">
                            <h6><strong><%= boards[i].title %></strong></h6>
                          </div>
                          <p class="mb-0"><%= boards[i].content %></p>
                          <br />
                          <div
                            class="custom-block-bottom d-flex justify-content-between mt-3"
                          ></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <% } %>
              </div>
              <!-- 넓은 화면 이외에서는 슬라이드 기능 비활성화 -->
              <div class="carousel-inner d-none d-md-block">
                <% for (let i = 0; i < boards.length; i++) { %>
                <!-- 한 줄에 3개의 카드가 시작하는 경우 -->
                <% if (i % 3 === 0) { %>
                <div class="carousel-item<%= i === 0 ? ' active' : '' %>">
                  <div class="row">
                    <% } %>

                    <div class="col-lg-4 col-12 mb-4 mb-lg-0">
                      <div class="custom-block custom-block-full">
                        <div class="custom-block-image-wrap">
                          <a href=""> </a>
                        </div>
                        <div class="custom-block-info">
                          <h4 class="mb-2">
                            <a href=""> <% boards[i].study %> </a>
                          </h4>
                          <br /><br />
                          <div class="profile-block d-flex">
                            <h6><%= boards[i].title %></h6>
                          </div>
                          <p class="mb-0"><%= boards[i].content %></p>
                          <br />
                          <div
                            class="custom-block-bottom d-flex justify-content-between mt-3"
                          ></div>
                        </div>
                      </div>
                    </div>

                    <!-- 한 줄에 3개의 카드가 끝나는 경우 -->
                    <% if ((i + 1) % 3 === 0 || i === boards.length - 1) { %>
                  </div>
                </div>
                <% } %> <% } %>
              </div>
              <!-- 화면 크기에 따라 표시할 슬라이드를 선택하는 컨트롤러 -->
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#boardCarousel"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#boardCarousel"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </section>
        </div>
      </div>
    </main>
  </body>
</html>
