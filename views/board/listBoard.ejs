<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>새싹 스터디 게시판</title>
    <!-- CDN -->
    <%- include('../includes/cdn.ejs') %>
    <!-- 게시판 목록 조회, 특정 게시글 조회 -->
    <link rel="stylesheet" href="/static/css/board/boardSearch.css" />
    <link rel="stylesheet" href="/static/css/board/listBoard.css">
    <script defer src="/static/js/listBoard.js"></script>
    <!-- 게시물 목록에서도 로그인/회원가입 모달창 사용하기 위해 css, js 파일 필요함 -->
    <script defer src="/static/js/loginRegister.js"></script>
  </head>
  <body>
    <%- include('../includes/header.ejs') %>
    <div class="boardContainer container">
      <div class="boardTop d-flex justify-content-between">
        <div class="board_title">
          <h3 class="display-6"><strong>새싹 스터디 게시판🌱</strong></h3>
          <p>새싹 스터디 게시판입니다. 자유롭게 작성해주세요~~</p>
        </div>
  
        <div class="board_search_post d-flex justify-content-end align-items-center gap-2">
          <!-- 검색 창 -->
          <div class="input-group w-75 d-flex">
            <input type="text" class="form-control" id="searchInput" placeholder="검색어를 입력하세요">
            <div class="input-group-append">
              <button class="btn" id="searchButton" type="button">검색</button>
            </div>
          </div>
          <!-- 글 작성 버튼 -->
          <div class="boardPostBtn">
            <% if (typeof session === 'undefined') { %>
            <a href="" class="btn" data-bs-toggle="modal" data-bs-target="#loginModal">글 작성하기</a>
            <% } else { %>
            <a href="/board/register" class="btn">글 작성하기</a>
            <% } %>
          </div>
        </div>
      </div>

      <div class="board_list_wrap d-flex flex-column justify-content-center align-items-center">
        <!-- 게시물 -->
        <div class="board_top bg-success bg-opacity-10 border-top border-bottom w-100 row justify-content-center text-center">
          <div class="top py-2 border-top w-100 row text-center">
            <div class="num col-2">번호</div>
            <div class="title col-6">제목</div>
            <div class="date col-2">작성일</div>
            <div class="count col-2">조회수</div>
          </div>
        </div>
        <div class="board_list border-bottom w-100 row justify-content-center text-center" id="boardList">
          <% let num = 1 %>
          <% data.forEach((board) => { %>
          <div class="row py-2">
            <div class="num col-2"><%= num %></div>
            <div class="title col-6">
              <a href="/board?boardSeq=<%= board.boardSeq %>" class="view-link">
                <%= board.title %>
              </a>
            </div>
            <div class="date col-2">
              <%= board.dataValues.year + '-' + board.dataValues.month + '-' + board.dataValues.month %>
            </div>
            <div class="count col-2"><%= board.count %></div>
          </div>
          <% num++ %>
          <% }) %>
        </div>
  
      <!-- 페이지네이션 -->
      <button class="beforePage" onclick="changePagination()">이전</button>
      <div class="board_page" id="pagination">
        <div onclick="changePageNum(this)">1</div>
        <% for (i = 1; i < Math.ceil(allBoardLen / 5); i++) { %>
        <div onclick="changePageNum(this)"><%= i+1 %></div>
        <% } %>
      </div>
      <button class="newtPage" onclick="changePagination()">다음</button>
    </div>
  </body>
</html>
