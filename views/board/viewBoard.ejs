<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìƒˆì‹¹ ìŠ¤í„°ë”” ê²Œì‹œíŒ</title>
    <link rel="stylesheet" href="css/css.css" />
  </head>
  <body>
    <div class="board_wrap">
      <div class="board_title">
        <strong>ìƒˆì‹¹ ìŠ¤í„°ë”” ê²Œì‹œíŒğŸŒ±</strong>
        <p>ìƒˆì‹¹ ìŠ¤í„°ë”” ê²Œì‹œíŒì…ë‹ˆë‹¤. ììœ ë¡­ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”~~</p>
      </div>
      <div class="board_view_wrap">
        <div class="board_view">
          <div class="title">ê¸€ ì œëª© ì•ˆë…•í•˜ì„¸ìš”~~</div>
          <div class="info">
            <dl>
              <dt>ë²ˆí˜¸</dt>
              <dd>1</dd>
            </dl>
            <dl>
              <dt>ê¸€ì“´ì´</dt>
              <dd>í™ê¸¸ë™</dd>
            </dl>
            <dl>
              <dt>ì‘ì„±ì¼</dt>
              <dd>2023.09.08</dd>
            </dl>
            <dl>
              <dt>ì¡°íšŒ</dt>
              <dd>33</dd>
            </dl>
          </div>
          <div class="cont">
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤<br />
            ê¸€ ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤
          </div>
        </div>
    <!-- JavaScript ì½”ë“œì™€ ìŠ¤íƒ€ì¼ì´ ì ìš©ëœ ëŒ“ê¸€ ëª©ë¡ -->
    <div class="comment_section">
      <h2>ëŒ“ê¸€ ì‘ì„±</h2>
      <div class="comment_form">
        <label for="comment_author">ì´ë¦„:</label>
        <input type="text" id="comment_author" name="comment_author" />
        <label for="comment_content">ëŒ“ê¸€ ë‚´ìš©:</label>
        <textarea id="comment_content" name="comment_content" rows="4"></textarea>
        <button type="submit" id="submit_comment">ëŒ“ê¸€ ì‘ì„±</button>
      </div>
      <div class="comment_list"></div>
    </div>

      <div class="bt_wrap">
        <a href="listBoard.ejs" class="on">ëª©ë¡</a>
        <a href="postBoard.ejs">ìˆ˜ì •</a>
      </div>
    </div>


    <!-- JavaScript ì½”ë“œ-->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const submitButton = document.getElementById("submit_comment");
        const commentAuthorInput = document.getElementById("comment_author");
        const commentContentInput = document.getElementById("comment_content");
        const commentList = document.querySelector(".comment_list");
        let commentIdCounter = 1;

        // ìˆ˜ì • ì¤‘ì¸ ëŒ“ê¸€ì„ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
        let editingComment = null;

        submitButton.addEventListener("click", function (e) {
          e.preventDefault();

          const author = commentAuthorInput.value;
          const content = commentContentInput.value;

          if (!author || !content) {
            alert("ëŒ“ê¸€ ì‘ì„±ìì™€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
            return;
          }

          if (editingComment) {
            // ìˆ˜ì • ì¤‘ì¸ ëŒ“ê¸€ì„ ì—…ë°ì´íŠ¸
            editingComment.querySelector(".comment_author").textContent = author;
            editingComment.querySelector(".comment_content").textContent = content;
            editingComment = null; // ìˆ˜ì • ì™„ë£Œ í›„ ì´ˆê¸°í™”
          } else {
            // ìƒˆ ëŒ“ê¸€ì„ ìƒì„±
            const commentItem = document.createElement("div");
            commentItem.classList.add("comment_item");
            commentItem.innerHTML = `
              <div class="comment_author">${author}</div>
              <div class="comment_content">${content}</div>
              <div class="comment_controls">
                <button class="edit_comment">ìˆ˜ì •</button>
                <button class="delete_comment">ì‚­ì œ</button>
              </div>
            `;

            const commentId = `comment_${commentIdCounter}`;
            commentItem.setAttribute("id", commentId);

            // ìƒˆ ëŒ“ê¸€ì„ ëª©ë¡ì˜ ë§ˆì§€ë§‰ì— ì¶”ê°€
            commentList.insertBefore(commentItem, null);

            commentIdCounter++;
          }

          commentAuthorInput.value = "";
          commentContentInput.value = "";

          window.scrollTo({ top: 0, behavior: "smooth" });
        });

        // ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ëŒ“ê¸€ ì‚­ì œ
        commentList.addEventListener("click", function (e) {
          if (e.target.classList.contains("delete_comment")) {
            const commentItem = e.target.closest(".comment_item");
            commentList.removeChild(commentItem);
          }

          if (e.target.classList.contains("edit_comment")) {
            // ìˆ˜ì • ë²„íŠ¼ì„ í´ë¦­í•œ ê²½ìš°
            const commentItem = e.target.closest(".comment_item");
            const author = commentItem.querySelector(".comment_author").textContent;
            const content = commentItem.querySelector(".comment_content").textContent;

            // ìˆ˜ì • ì¤‘ì¸ ëŒ“ê¸€ì˜ ë‚´ìš©ì„ ì…ë ¥ë€ì— ì±„ìš°ê¸°
            commentAuthorInput.value = author;
            commentContentInput.value = content;

            // ìˆ˜ì • ì¤‘ì¸ ëŒ“ê¸€ì„ ì €ì¥
            editingComment = commentItem;
          }
        });
      });
    </script>
  </body>
</html>